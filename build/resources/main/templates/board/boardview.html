<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div th:replace="header.html::header"></div>
<script th:src="@{/js/board.js}"></script>
<div class="container my-3">
    <button><a th:href="@{/board/boardlist}">목록보기</a></button>
    <button th:if="${session.logindto != null} and ${session.logindto.m_id == boardDto.b_writer}"
            th:onclick="boarddelete([[${boardDto.b_num}]])">삭제
    </button>

    <button th:if="${session.logindto != null} and ${session.logindto.m_id == boardDto.b_writer}">
        <a th:href="@{'/board/boardupdate/' + ${boardDto.b_num} }">수정</a>
    </button>
    <table class="table my-3" id="replytable">
        <tr>
            <td th:text="${'조회수 : '+boardDto.b_view}"></td>
            <td th:text="${'작성자 : '+boardDto.b_writer}"></td>
            <td th:text="${'작성일 : '+boardDto.b_createdDate}"></td>
        </tr>
        <tr>
            <td colspan="3" th:text="${ '['+boardDto.b_num+']' + boardDto.b_title }"></td>
        </tr>
        <tr>
            <td colspan="3" th:utext="${boardDto.b_content}"></td>
        </tr>
        <tr>
            <td>첨부파일</td>
            <td colspan="2">
                <!--    <img th:src="@{'/upload/'+${boardDto.b_img} }">-->
                <a th:href="@{/board/filedownload(b_img=${boardDto.b_img})}" th:text="${boardDto.b_realimg}"></a>
                <!-- /board/filedownload(b_img=${boardDto.b_img}) 이렇게도 가능 -->
            </td>
        </tr>
    </table>

    <!-- 댓글 -->
    <div class="row my-3">
        <div class="col-md-10">
            <textarea class="form-control" style="width:100%; resize: none;" name="" id="rcontent"></textarea>
        </div>
        <div class="col-md-2">
            <button class="form-control p-3" th:onclick="replywrite([[${boardDto.b_num}]])">등록</button>
        </div>
    </div>
    <table class="table">
        <tr>
            <th width="10%">작성자<br><span style="font-size:5px;">작성일</span></th>
            <th width="70%">내용</th>
            <th width="10%">비고</th>
        </tr>
        <tr th:each="reply : ${replyEntitys}">
            <td>
                <div th:text="${reply.rwriter}"></div>
                <div style="font-size:5px;" th:text="${#temporals.format(reply.createdDate,'MM-dd hh:mm')}"></div>
            </td>
            <td th:text="${reply.rcontent}"></td>
            <td>
                <button th:if="${reply.rwriter != null} and ${session.logindto.m_id == reply.rwriter}" th:onclick="replydelete([[${reply.rnum}]])">삭제</button>
                <button th:if="${reply.rwriter != null} and ${session.logindto.m_id == reply.rwriter}" th:onclick="replyupdate([[${reply.rnum}]])">수정</button>
            </td>
        </tr>
    </table>

</div>

</body>
</html>